# -- Provide a name in place of `github-exporter`
nameOverride: ""

# -- String to fully override `"github-exporter.fullname"`
fullnameOverride: ""

image:
  # -- image registory
  registry: docker.io
  # -- image repository
  repository: githubexporter/github-exporter
  # -- image pull policy
  pullPolicy: Always
  # -- Overrides the image tag
  tag: "v2.2.0"

# -- If defined, uses a Secret to pull an image from a private Docker registry or repository.
imagePullSecrets: []

# -- Number of replicas
replicaCount: 1

# -- The number of old ReplicaSets to retain
revisionHistoryLimit: 0

# -- pod-level security context
podSecurityContext: {}
  # if you are using direct host access to the certificates you probably need to run the pod as root
  # fsGroup: 0
  # runAsGroup: 0
  # runAsUser: 0

# -- Resource limits and requests for the controller pods.
resources:
  requests:
    cpu: 100m
    memory: 100Mi
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

# -- container-level security context
securityContext: {}
  # capabilities:nodeSelector:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  # -- Kubernetes service type
  type: ClusterIP
  # -- Kubernetes port where service is exposed
  port: 9171

ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

# BETA: Configure the gateway routes for the chart here.
# More routes can be added by adding a dictionary key like the 'main' route.
# Being BETA this can/will change in the future without notice, do not use unless you want to take that risk
# [[ref]](https://gateway-api.sigs.k8s.io/references/spec/#gateway.networking.k8s.io%2fv1alpha2)
route:
  main:
    # -- Enables or disables the route
    enabled: false

    # -- Set the route apiVersion, e.g. gateway.networking.k8s.io/v1 or gateway.networking.k8s.io/v1alpha2
    apiVersion: gateway.networking.k8s.io/v1

    # -- Set the route kind
    # Valid options are GRPCRoute, HTTPRoute, TCPRoute, TLSRoute, UDPRoute
    kind: HTTPRoute

    # -- Add annotations to the route
    annotations: {}

    # -- Add labels to the route
    labels: {}

    # -- Hostnames to be matched
    hostnames: []
    # - my-filter.example.com

    # -- Parent references (Gateway)
    parentRefs: []
    # - name: acme-gw

    # -- define conditions used for matching the rule against incoming HTTP requests.
    # @default -- see [values.yaml](./values.yaml)
    matches:
      - path:
          type: PathPrefix
          value: /

    # -- Filters define the filters that are applied to requests that match this rule.
    filters: []

    # -- Additional custom rules that can be added to the route
    additionalRules: []

    # -- adds a filter for redirecting to https (HTTP 301 Moved Permanently). To redirect HTTP traffic to HTTPS, you need to have a Gateway with both HTTP and HTTPS listeners. Matches and filters do not take effect if enabled. Ref. https://gateway-api.sigs.k8s.io/guides/http-redirect-rewrite/
    httpsRedirect: false

serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# -- Node labels for pod assignment
nodeSelector: {}

# -- Toleration labels for pod assignment
tolerations: []

# -- Affinity settings for pod assignment
affinity: {}

# -- additional environment variables to be added to the pods
extraEnv: []

github:
  auth:
    app:
      # -- Enable authentication using a GitHub App.
      enabled: false
      # -- The APP ID of the GitHub App.
      id: ""
      # -- The INSTALLATION ID of the GitHub App.
      installationId: ""
      # --The private Key.
      privateKey: ""
    # -- Name of existing secret to use for authentication credentials. Keys in secret should be called `github-app-id`, `github-app-installation-id`, `github-app-private-key` or `github-token` depenending on the choosen authentication type (`github.auth.type``).
    existingSecret: ""
    token:
      # -- Enable authentication with an API Token
      enabled: false
      # -- The Token used to authenticate against the GitHub API
      value: ""
  config:
    # -- Github API URL, shouldn't need to change this.
    apiUrl: "https://api.github.com"
    # -- The level of logging the exporter will run with.
    logLevel: "error"
    # -- The rate limit that suppose to be for github app (default is 15,000). If the exporter sees the value is below this variable it generating new token for the app.
    rateLimit: 0
  targets:
    # -- If supplied, the exporter will enumerate all repositories for that organization. Expected in the format "org1, org2".
    organizations: ""
    # -- If supplied, The repos you wish to monitor, expected in the format "user/repo1, user/repo2". Can be across different Github users/orgs.
    repositories: ""
    # -- If supplied, the exporter will enumerate all repositories for that users. Expected in the format "user1, user2".
    users: ""

serviceMonitor:
   # -- Enable a Prometheus ServiceMonitor
  enabled: false
  # -- Prometheus ServiceMonitor labels
  additionalLabels: {}
    # release: prometheus
  # -- Prometheus ServiceMonitor selector
  selector: {}
    # prometheus: kube-prometheus
  # -- Prometheus ServiceMonitor interval
  interval: 30s
  # -- Prometheus ServiceMonitor namespace
  namespace: ""
  # -- Prometheus [MetricRelabelConfigs] to apply to samples before ingestion
  metricRelabelings: []
  # -- Prometheus [RelabelConfigs] to apply to samples before scraping
  relabelings: []
    # - source_labels: [__address__]
    #   target_label: __param_target
    # - source_labels: [__param_target]
    #   target_label: instance
    # - target_label: __address__
    #   replacement: prometheus-pve-exporter:9221  # PVE exporter service.
